	<!DOCTYPE html>
	<html>
	<head>
		<title>NIDASH Data Model (NI-DM) for fMRI Results Specification</title>
		<meta charset='utf-8'>
		<script src='http://www.w3.org/Tools/respec/respec-w3c-common'
		async class='remove'></script>

		<LINK href="./stylesheet/nidm-w3c-unofficial.css" rel="stylesheet" type="text/css">

			<script class='remove'>
			var respecConfig = {
				specStatus: "base",
				shortName:  "SPMResults",
				overrideCopyright: "<p class=copyright>NI-DM © Free To Everyone!</p>",
				editors: [
				{   name:       "David Keator",                   
				company:    "INCF",
				companyURL: "http://wiki.incf.org/mediawiki/index.php/Neuroimaging_Task_Force" },
				{   name:       "Camille Maumet",                   
				company:    "INCF",
				companyURL: "http://wiki.incf.org/mediawiki/index.php/Neuroimaging_Task_Force" }
				],
				previousMaturity: "FPWD",
				previousPublishDate:  "2013-12-10",
				wg:           "NIDASH Working Group",
				wgURI:        "http://wiki-new.incf.org/mediawiki/index.php/Neuroimaging_Task_Force",
				wgPublicList: "derived_data@birncommunity.org",
				wgPatentURI:  "http://wiki-new.incf.org/mediawiki/index.php/Neuroimaging_Task_Force",
				afterEnd: function () {

					var currentDate = new Date()
					var date = currentDate.toString('dddd, MMMM ,yyyy')
					$("#respecHeader h2").text("NI-DM Specification " + date);
					$("#respecHeader img").attr({ src: "../../../spec/stylesheet/nidm-text.png", width: 100, height:50 });
				},
				localBiblio:  {
					"KEATORNI13": {
						title:    "Towards structured sharing of raw and derived neuroimaging data across existing resources"
						,   href:     "http://www.sciencedirect.com/science/article/pii/S105381191300596X"
						,   authors:  [
						"David B. Keator"
						,   "Karl Helmer"
						,	"Jason Steffener"
						,	"Jessica A. Turner"
						,	"Theodorus G.M. VanErp"
						,	"Syam Gadde"
						,	"Naveen Ashish"
						,	"Gully A. Burns"
						,	"Nolan B. Nichols"
						]
						,   publisher:  "	Elsevier"
					}
				}	

			};
			</script>
		</head>
		<body>
			<section id='abstract'>
				<p>
					This document describes the encoding of a SPM results output using the NI-DM data model.  
				</p>
			</section>

			<section id='sotd'>
				<p>
					<!--FIXME: Status of this document-->
				</p>

			</section>

			<section class='informative'>
				<h2>Introduction</h2>
				<p>
					The NIDASH Data Model (NI-DM) for fMRI Results (FIXME: do we want a name for that?) is 
					a <a href="../../../spec/NIDM_Spec.html">
					NI-DM</a> compliant structured representation of the....   
				</p>
				<p>
					The fMRI results specification formally describes the encoding of the functional MRI results into a NI-DM representation.
				</p>


	    <!-- FIXME:<section id='conformance'>
	      <p>
	         The single conformance class described in this specification is 
	        the <dfn>SPM Results Object Model</dfn>, a class of NI-DM formatted objects for describing
	        a neuroimaging analysis result created with the <a href="http://www.fil.ion.ucl.ac.uk/spm/software/">
	        SPM</a> software.
	      </p>
	  </section>-->
	  <section>
	  	<h3>Namespaces</h3>
	  	The following namespaces prefixes are used throughout this document.
	  	<p>
	  		The following namespaces prefixes are used throughout this document.
	  	</p><div style="text-align: left;">
	  	<table class="thinborder" style="margin-left: auto; margin-right: auto;">
	  		<caption id="namespace-table"><span>Table 1<sup><a class="internalDFN" href="#namespace-table"><span class="diamond"> ◊:</span></a></sup> </span>Prefix and Namespaces used in this specification</caption> <!-- Table 1-->
	  		<tbody><tr><td><b>prefix</b></td><td><b>namespace IRI</b></td> <td><b>definition</b></td></tr>
	  			<tr><td>nidm</td><td>http://www.incf.org/ns/nidash/nidm#</td><td>The NI-DM namespace (see <a class="section-ref" href="#term-NamespaceDeclaration"><span>Section 5.7.4</span></a>)</td></tr>
	  			<tr><td>prov</td><td>http://www.w3.org/ns/prov#</td><td>The PROV namespace (FIXME: add link)</td></tr>
	  			<tr><td>xsd</td><td>http://www.w3.org/2000/10/XMLSchema#</td><td>XML Schema Namespace [<cite><a class="bibref" href="#bib-XMLSCHEMA11-2">XMLSCHEMA11-2</a></cite>]</td></tr>
	  			<tr><td>(others)</td><td>(various)</td><td>All other namespace prefixes are used in examples only. <br> In particular, IRIs starting with "http://example.com" represent<br> some application-dependent IRI [<cite><a class="bibref" href="#bib-RFC3987">RFC3987</a></cite>]</td></tr>
	  		</tbody></table>
	  	</div>
	  </section>
	</section>

	<section>
		<h2>NI- for Massively Univariate Results (NI-MUR) Overview</h2>

		<p>
			NI-MUR Data Model is summarized in Fig. 1.  
			FIXME: Description

		</p>

		<section>
			<h3>NI-R Core Structures</h3>
			<figure>
				<img src="NI-Results Overview.png" width=500px/>
				<figcaption>NI- Results: Core Structure.</figcaption>
			</figure> 
			<p>The concepts found in the core of NI-Results are introduced in the rest of this section.
				They are summarized in  <a href="#overview-types-and-relations">Table 2</a>, where they are categorized as type or relation.
				The first column lists concepts, the second column indicates whether a concept maps to a type or a relation, whereas the third column contains the corresponding name, as it appears in Figure 1.    Names of relations have a verbal form in the past tense to express what happened in the past, as opposed to what may or will happen. In the core of PROV, all relations are binary. 
			</p>

			<div style="text-align: left;">
				<table class="thinborder" style="margin-left: auto; margin-right: auto;">
					<caption id="overview-types-and-relations"><span>Table 2<sup><a class="internalDFN" href="#overview-types-and-relations"><span class="diamond"> ◊:</span></a></sup> </span>Mapping of NI-Results core concepts to types and relations and PROV core concepts</caption> <!-- Table 2 -->
					<tbody><tr><td><b>NI-Results Concepts</b></td><td><b>Types or Relation (PROV concepts)</b></td><td><b>Name</b></td><td><b>Overview</b></td></tr>
						<!-- ------------- Beginning of PROV Entities ------------- -->
						<tr>
							<td><a href="#concept-entity" class="internalDFN">Data</a>
							</td>
							<td rowspan="12" style="text-align: center;">NI-ResultsDM Types<br/> (PROV Entities)</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Data</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-Data"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">DesignMatrix</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Design Matrix</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-DesignMatrix"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ParameterEstimateMap</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Parameter Estimate Map</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ParameterEstimateMap"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ResidualMeanSquaresMap</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Residual Mean Squares Map</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ResidualMeanSquaresMap"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ContrastWeights</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Contrast Weights</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ContrastWeights"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">Mask</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Mask</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-Mask"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ContrastEstimateMap</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Contrast Estimate Map</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ContrastEstimateMap"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ContrastStandardErrorMap</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Contrast Standard Error Map</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ContrastStandardErrorMap"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">StatisticalMap</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Statistical Map</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-StatisticalMap"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ExcursionSet</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Excursion Set</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ExcursionSet"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ClusterStatistic</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Cluster Statistic</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ClusterStatistic"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">PeakStatistic</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Peak Statistic</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-PeakStatistic"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<!-- ------------- End of PROV Entities ------------- -->
						<!-- ------------- Beginning of PROV Activities ------------- -->
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ModelParameterEstimation</a>
							</td>
							<td rowspan="3" style="text-align: center;">NI-ResultsDM Types<br/> (PROV Activities)</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Model Parameter Estimation</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ModelParameterEstimation"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">ContrastEstimation</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Contrast Estimation</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-ContrastEstimation"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-entity" class="internalDFN">Inference</a>
							</td>
							<td><a title="dfn-Entity" href="#dfn-entity" class="internalDFN">Inference</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="#section-Inference"><span>Section 2.1.1</span></a>
							</td>
						</tr>
						<!-- ------------- End of PROV Activities ------------- -->
						<!-- ------------- Beginning of PROV Relations ------------- -->
						<tr>
							<td><a href="#concept-generation" class="internalDFN">Generation</a>
							</td>
							<td rowspan="3" style="text-align: center;">PROV Relations<br/> 
							</td>
							<td><a title="wasGeneratedBy" href="#dfn-wasgeneratedby" class="internalDFN">WasGeneratedBy</a>
							</td>
							<td style="text-align: center;"><a class="section-ref" href="http://www.w3.org/TR/prov-dm/#dfn-wasgeneratedby"><span>PROV-DM wasGeneratedBy</span></a>
							</td>
						</tr>
						<tr>
							<td><a href="#concept-usage" class="internalDFN">Usage</a></td><td><a title="used" href="#dfn-used" class="internalDFN">Used</a></td><td style="text-align: center;"><a class="section-ref" href="http://www.w3.org/TR/prov-dm/#dfn-used"><span>PROV-DM used</span></a></td>
						</tr>
						<tr>
							<td><a href="#concept-derivation" class="internalDFN">Derivation</a></td><td><a title="wasDerivedFrom" href="#dfn-wasderivedfrom" class="internalDFN">WasDerivedFrom</a></td><td style="text-align: center;"><a class="section-ref" href="http://www.w3.org/TR/prov-dm/#dfn-wasderivedfrom"><span>PROV-DM wasDerivedFrom</span></a></td>
						</tr>
					</tbody>
				</table>
			</div>

			</section>
		</section>
		<section>
			<h1>Illustration of NIDASH Results Data Model by an example.</h1>
		</section>
		<section>
			<h1>NIDASH Results Data Model Types and Relations.</h1>
			<section>
				<h2>Component 1: Model Parameter Estimation ins and outs</h2>
				<section>
					<h3 label="">ModelParameterEstimation</h3>
					<div class="glossary-ref">   A <dfn id="concept-ModelParameterEstimation" title="ModelParameterEstimation" class="internalDFN">ModelParameterEstimation</dfn><sup><a class="internalDFN" href="#concept-ModelParameterEstimation"><span class="diamond"> ◊</span></a></sup> is an activity defined as a data transformation that finds parameter values most compatible with the data as judged by the model (definition from STATO). </div>

					<p></p><div class="attributes" id="attributes-ModelParameterEstimation"> A <dfn title="dfn-ModelParameterEstimation" id="dfn-ModelParameterEstimation" class="internalDFN">ModelParameterEstimation</dfn><sup><a class="internalDFN" href="#dfn-ModelParameterEstimation"><span class="diamond"> ◊</span></a></sup><span class="withPn"><!--, written <span class="pnExpression" id="pn-activity">ModelParameterEstimation(id, st, et, [attr1=val1, ...])</span> in PROV-N,--></span> has no pre-defined attributes.
				</section>
				<section>
					<h3 label="">DesignMatrix</h3>
					<div class="glossary-ref">   A <dfn id="concept-designmatrix" title="DesignMatrix" class="internalDFN">DesignMatrix</dfn><sup><a class="internalDFN" href="#concept-designmatrix"><span class="diamond"> ◊</span></a></sup> is an entity defined as a matrix of values of explanatory variables that is used in statistical models. It can contain indicator variables (ones and zeros) that indicate group membership, or it can contain values of continuous variables (Definition from Wikipedia). </div>

					<p></p>
					<div class="attributes" id="attributes-DesignMatrix"> A <dfn title="dfn-DesignMatrix" id="dfn-DesignMatrix" class="internalDFN">DesignMatrix</dfn><sup><a class="internalDFN" href="#dfn-DesignMatrix"><span class="diamond"> ◊</span></a></sup><span class="withPn"></span> has:
					<ul>
						<li><span class="attribute" id="DesignMatrix.label">prov:label</span>: an <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> label describing the design matrix;</li>
						<li><span class="attribute" id="DesignMatrix.visualisation">nidm:visualisation</span>: an <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> graphical representation of the design matrix;</li>
						<li><span class="attribute" id="DesignMatrix.location">location</span>: an <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> a prov:location attribute providing the location of a csv file describing the design matrix.</li>
						<li><span class="attribute" id="DesignMatrix.location">originalFileName</span>: an <em class="rfc2119" title="OPTIONAL">OPTIONAL</em> file name corresponding to the name generated by the neuroimaging analysis software.</li>
					</ul>
				</div>

				</section>
			<section>
				<h2>Contrast Estimation</h2>
			</section>
			<section>
				<h2>Inference</h2>
			</section>
			<section>
				<h2>Data Array</h2>
			</section>
		</section>
	</body>
	</html>
